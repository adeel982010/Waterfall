<?xml version="1.0" encoding="UTF-8"?>
<odoo>

	<data noupdate="0">

        <record id="customer_overdue_mail_report" model="mail.template">
            <field name="name">Customer Overdue Details</field>
            <field name="subject">Customer Overdue Details</field>
            <field name="email_to">${(object.user_id.email and '%s &lt;%s&gt;' % (object.user_id.name, object.user_id.email) or '')|safe}</field>
            <field name="lang">${object.lang}</field>
            <field name="model_id" ref="account.model_account_invoice"/>
            <field name="auto_delete" eval="True"/>
            <field name="body_html">
		        <![CDATA[
                    Hello ${object.user_id.name},


			            <table class="table table-condensed" cellspacing="1" border="1" style="width:100%;border:1px solid black; font-size:14px">
			            	<tr  style="background:#b3b3dd;">
			            		<td style="font:bold;text-align:center;border:1px solid black" colspan="7">
			            			<b>Customer Overdue Report</b>
			            		</td>
			            	</tr>

		        			<tr>
		        				<th style="text-align:center;border:1px solid black;">Sr.</th>
		            			<th style="text-align:center;border:1px solid black">Invoice No</th>
		            			<th style="text-align:center;border:1px solid black">Customer</th>
		            			<th style="text-align:center;border:1px solid black">Invoice Date</th>
		            			<th style="text-align:center;border:1px solid black">Due Date</th>
		            			<th style="text-align:center;border:1px solid black">Invoice Amount</th>
                                <th style="text-align:center;border:1px solid black">Due Amount</th>
		            		</tr>

		            		% for val in ctx['data']:
		            			<tr>

		            				<td style="text-align:center;border:1px solid black;">${val.get('inv_count','')}</td>
		            				<td style="text-align:center;border:1px solid black">${val.get('inv_no','')}</td>
		            				<td style="text-align:center;border:1px solid black">${val.get('customer','')}</td>
		            				<td style="text-align:center;border:1px solid black">${val.get('inv_date','')}</td>
		            				<td style="text-align:center;border:1px solid black">${val.get('due_date','')}</td>
		            				<td style="text-align:center;border:1px solid black">${val.get('inv_amt','')}</td>
		            				<td style="text-align:right;border:1px solid black">${val.get('due_amt','')}</td>

		            			</tr>
		            		% endfor

		        		</table>


					<p>

						Thanks,

	                </p>
	                <pre>
	                	Auto Generated Email
	                </pre>


		    	]]>
		  	</field>
        </record>

        <record id="ir_send_mail_cron_scheduler_action" model="ir.cron">
            <field name="name">Followup Mail scheduler</field>
            <field name="model_id" ref="model_account_invoice"/>
            <field name="state">code</field>
            <field name="code">model.cron_overdue_customer()</field>
            <field name="interval_number">1</field>
            <field name="interval_type">days</field>
            <field name="numbercall">-1</field>
            <field name="doall" eval="False"/>
        </record>

	</data>

</odoo>